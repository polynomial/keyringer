#!/usr/bin/env ruby

# TODO
# - a lot of things

def usage
  puts "Usage:
#{File.basename($0)} TODO! "
  exit 1
end

$:.unshift File.dirname(__FILE__) + '/../lib'
require 'keyringer'
begin 
  begin
    action = Keyringer.const_get(ARGV[1].capitalize)
  rescue NameError
    wrapper = Keyringer::BashWrapper.new
    wrapper.execute
  else
    if action.is_a?(Class)
      instance = action.new
      output   = instance.execute
      puts output
    end
  end
rescue SystemExit => e
  exit e.status
rescue Exception => e
  puts "Fatal error: #{e.inspect}"
  exit 1
end

